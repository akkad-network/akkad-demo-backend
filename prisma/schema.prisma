datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model DecreaseOrderRecord {
  id                         Int      @id @default(autoincrement())
  order_id                   Int
  owner                      String
  order_type                 String
  vault                      String
  symbol                     String
  direction                  String
  fee                        String
  executed                   Boolean
  created_at                 DateTime
  take_profit                Boolean
  decrease_amount            String
  limited_index_price        String
  collateral_price_threshold String
  key                        String
  table_handle               String
  transaction_version        String
  write_set_change_index     Int
  status                     String?  @default("NORMAL")
  createdAt                  DateTime @default(now())
}

model IncreaseOrderRecord {
  id                         Int      @id @default(autoincrement())
  order_id                   Int
  owner                      String
  order_type                 String
  vault                      String
  symbol                     String
  direction                  String
  fee                        String
  executed                   Boolean
  created_at                 DateTime
  open_amount                String
  reserve_amount             String
  limited_index_price        String
  collateral_price_threshold String
  key                        String
  table_handle               String
  transaction_version        String
  write_set_change_index     Int
  status                     String?  @default("NORMAL")
  createdAt                  DateTime @default(now())
}

model PositionRecord {
  id                       Int      @id @default(autoincrement())
  order_id                 Int
  owner                    String
  vault                    String
  symbol                   String
  direction                String
  closed                   Boolean
  reserved                 String
  collateral               String
  position_size            String
  open_timestamp           String
  position_amount          String
  funding_fee_value        String
  funding_fee_is_positive  Boolean?
  last_funding_rate        String
  last_funding_is_positive Boolean?
  is_positive              Boolean
  last_reserving_rate      String
  reserving_fee_amount     String
  key                      String
  table_handle             String
  transaction_version      String
  write_set_change_index   Int
  leverage_number          String?
  createdAt                DateTime @default(now())
}

model AggregatePositionRecord {
  id                     Int      @id @default(autoincrement())
  vault                  String
  symbol                 String
  direction              String
  average_funding_fee    String
  average_funding_rate   String
  average_reserving_rate String
  createdAt              DateTime @default(now())
}

model UserReferralCode {
  id             Int      @id @default(autoincrement())
  wallet_address String
  referral_code  String
  createdAt      DateTime @default(now())
}

model ReferralRecords {
  id                    Int      @id @default(autoincrement())
  referrer_address      String
  referrer_code         String
  referral_user_address String
  createdAt             DateTime @default(now())
}

model GlobalSyncController {
  id                             Int      @id @default(autoincrement())
  last_sync_transaction_verision String
  sync_type                      String
  createdAt                      DateTime @default(now())
}
